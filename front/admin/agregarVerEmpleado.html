<div class="fondo-modal" id="agregarVerEmpleado" style="display:none">
    <div class="contenedor-modal">
        <div class="cuerpo-modal agregarVerEmpleado">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="info">
                            <input id="nombre" placeholder="Nombre y Apellido">
                        </div>
                    </div>
                </div>
                <div class="row">
                        <div class="col-12">
                            <div class="info">
                                <input id="email" placeholder="E-mail">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                            <div class="col-12">
                                <div class="info">
                                    <input id="usuario" placeholder="Usuario Resto App">
                                </div>
                            </div>
                        </div>
                <div class="row">
                    <div class="col-6 inf-add">
                        <div class="info"> DNI</div>
                    </div>
                    <div class="col-6 select-add">
                        <div class="info">
                            <input type="number" id="dni">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-6 inf-add">
                        <div class="info"><img src="../media/Img/calendario-gris.png"> Nacimiento</div>
                    </div>
                    <div class="col-6 select-add-fecha">
                        <div class="row">
                            <div class="col-12 info">
                                <input type="date" id="fechaNac">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-6 inf-add">
                        <div class="info"><img src="../media/Img/calendario-seleccionado.png"> Contrataci√≥n</div>
                    </div>
                    <div class="col-6 select-add-fecha">
                        <div class="row">
                            <div class="col-12 info">
                                <input type="date" id="fechaContratacion">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-6 inf-add">
                        <div class="info"><img src="../media/Img/bolsa-dinero.png"> Salario</div>
                    </div>
                    <div class="col-6 select-add">
                        <div class="info">
                            <input type="number" id="sueldo">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-6 inf-add">
                        <div class="info"><img src="../media/Img/Grado.png"> Rol</div>
                    </div>
                    <div class="col-6 select-add">
                        <div class="info">
                            <!--     var rolesEmpleados=[null, "Bartender", "Cervecerx", "Cocinerx", "Camarerx", "Admin", "Candybar"];-->
                            <select id="rol">
                                <option value="0">-</option>
                                <option value="1">Socio</option>
                                <option value="2">Camarerx</option>
                                <option value="3">Bartender</option>
                                <option value="4">Cervecerx</option>
                                <option value="5">Cocinerx</option>
                                <option value="6">Candybar</option>                                
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-6 inf-add">
                        <div class="info"><img src="../media/Img/Grado.png"> Habilitado</div>
                    </div>
                    <div class="col-6 select-add">
                        <div class="info">
                            <select id="habilitado">
                                <option value="1">Si</option>
                                <option value="0">No</option>
                            </select>
                        </div>
                    </div>
                </div>
                <br>
                <br>
                <br>
                <div class="row">
                    <div class="col-6">
                        <button class="boton-modal" id="botonAgregarEmpleado">Guardar</button>
                    </div>
                    <div class="col-6">
                        <button onclick='$("#agregarVerEmpleado").fadeOut();' class="boton-modal cancelar">Cancelar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>

    idEmpleadoActual = -1;

function mostrarAgregarVerEmpleado(id) {

    empleado = traerEmpleadoPorId(id);
    idEmpleadoActual = id;

    if (empleado == -1){
        console.log("agregar empleado")

        $("#botonAgregarEmpleado").html("Agregar")
        $("#nombre").val("")
        $("#dni").val("")
        $("#sueldo").val(0)
        $("#botonAgregarEmpleado").off().click(agregarEmpleado)


    } else {
        console.log("modificar empleado")

        $("#botonAgregarEmpleado").html("Modificar")
        $("#nombre").val(empleado.nombre_completo)
        $("#usuario").val(empleado.usuario)
        $("#email").val(empleado.email)
        $("#dni").val(empleado.dni)
        $("#fechaNac").val(formatDate(empleado.fecha_nac))
        $("#fechaContratacion").val(formatDate(empleado.fecha_ingreso))
        $("#sueldo").val(empleado.sueldo)

        $("#rol option").each(function(k, v) {
            if (v.value == empleado.id_rol) v.selected = true;
        })
        $("#habilitado option").each(function(k, v) {
            if (v.value == empleado.habilitado) v.selected = true;
        })
        $("#botonAgregarEmpleado").off().click(modificarEmpleado)

    }

    $("#agregarVerEmpleado").fadeIn();
}

function modificarEmpleado(){
    console.log("modificar empleado")
     empleado={};
     empleado.id_empleado = idEmpleadoActual;
    empleado.nombre_completo= $("#nombre").val();
    empleado.dni=$("#dni").val();
    empleado.usuario=$("#usuario").val();
    empleado.email=$("#email").val();
    empleado.sueldo=$("#sueldo").val();
    empleado.id_rol=$("#rol").val();
    empleado.habilitado=$("#habilitado").val();
    empleado.fecha_nac=$("#fechaNac").val();
    empleado.fecha_ingreso=$("#fechaContratacion").val();
     console.log(empleado)
      $.ajax({
       // url:"../../server/admin/empleados/modificar",
       url: caminoBackEnd + "empleados/modificar",
        headers:{
            token: localStorage[usuarioLogueado_ls]
        },
        data:empleado,
        success:function(e){
            console.log(e)
            if(e!=-1) {
                   try { empleados = JSON.parse(e) } catch (e) { empleados = e }
                    localStorage["empleados_" + nombreDelSitio] = e;
                    armarTablaEmpleados();

            }else{
                mostrarModalConfirmacion("Error conectando con la Base de datos", "ok")
            
            }
             $("#agregarVerEmpleado").fadeOut();
        }
    })
}

function agregarEmpleado(){
    console.log("agregar empleado")

    empleado={};
    empleado.nombre_completo= $("#nombre").val();
    empleado.usuario= $("#usuario").val();
    empleado.email= $("#email").val();
    empleado.dni=$("#dni").val();
    empleado.sueldo=$("#sueldo").val();
    empleado.id_rol=$("#rol").val();
    empleado.habilitado=$("#habilitado").val();
    empleado.fecha_nac=$("#fechaNac").val();
    empleado.fecha_ingreso=$("#fechaContratacion").val();
     console.log(empleado)
   
     $.ajax({

        url: caminoBackEnd + "empleados/alta",
        //url:"../../server/admin/empleados/agregar",
        headers:{
            token: localStorage[usuarioLogueado_ls]
        },
        data:empleado,
        success:function(e){
            console.log(e)
            if(e!=-1) {
                   try { empleados = JSON.parse(e) } catch (e) { empleados = e }
                    localStorage["empleados_" + nombreDelSitio] = e;
                    armarTablaEmpleados();

            }else{
                mostrarModalConfirmacion("Error conectando con la Base de datos", "ok")
            
            }
             $("#agregarVerEmpleado").fadeOut();
        }
    })
   
}
</script>